---
title: 设备树规范v0.2
tags: Linux内核
---

------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文翻译自<font color=blue>[设备树官网](https://www.devicetree.org/)。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------

<style>table{word-break:initial;}</style>

### 3.7.1 /cpus/cpu\*节点的普通属性

下表描述了cpu节点的普通属性。 表3.6中描述的一些属性是具有特定适用细节的标准属性。

&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;表 3.6  /cpus/cpu\*节点的普通属性

|属性名|用法|值类型|定义|
|:--|:--|:--|:--|
|device_type|R |\<string>|值必须为“cpu”。|
|reg |R |\<prop-encoded-array>|reg的值是\<prop-encoded-array>，它为CPU节点表示的CPU/线程定义了 唯一CPU/线程ID。<br /><br />如果CPU支持多个线程（即多个执行流），则reg属性是每线程1个元素的数组。 /cpus节点上的#address-cells指定数组中每个元素占用的单元格(cell)数。软件可以通过将reg的大小除以/cpus的#address-cells来确定线程数。<br /><br />如果CPU/线程可以作为外部中断的目标，则reg属性值必须是可由中断控制器寻址的唯一CPU/线程ID。<br /><br />如果CPU /线程不能成为外部中断的目标，则reg必须是唯一的并且超出中断控制器寻址的范围。<br /><br />如果CPU/线程的PIR（挂起中断寄存器）是可修改的，则客户程序应（should）修改PIR以匹配reg属性值。如果PIR不能修改并且PIR值与中断控制器编号空间不同，则CPU绑定可以根据需要定义绑定特定表示的PIR值。
|clock-frequency|R |\<prop-encoded-array>|以赫兹为单位指定CPU的当前时钟速度。 该值是两种形式之一的\<prop-encoded-array>：<br />&emsp;&emsp;•  一个\<u32>。<br />&emsp;&emsp;•  一个\<u64>
|timebase-frequency|R |array|指定更新时基（timebase register）寄存器和递减器寄存器（decrementer registers ）的当前频率（以赫兹为单位）。 该值是两种形式之一的\<prop-encoded-array>：<br />&emsp;&emsp;•  一个\<u32>。<br />&emsp;&emsp;•  一个\<u64>
|status| SD| \<string> |描述CPU状态的标准属性。 对于对称多处理（SMP）配置中的CPU的节点，此属性应存在。对于CPU节点，“okay”和“disabled”值的含义如下：<br />&emsp;&emsp;• “okay”：CPU正在运行。<br />&emsp;&emsp;• “disabled”：CPU处于静止状态。<br />静止CPU是一种状态，它不会干扰其他CPU正常操作，也不会被其它正在运行的CPU的正常操作影响，除非用显式方法 启用或重新启用静态CPU（请参阅 enable-method属性）。<br />特别的，正在运行的CPU应能够在不影响静态CPU的情况下发出广播TLB无效。<br />示例：静态CPU可以处于自旋循环中，保持在复位状态，并与系统总线或其他实现相关状态电隔离。
|enable-method|SD |\<stringlist>|描述启用disabled状态的CPU的方法。 具有值为“disabled”的status属性的CPU需要此属性。该值由一个或多个字符串组成，这些字符串定义释放此CPU的方法。 如果客户程序能识别任何一种方法，则可以使用它。值应为以下之一：<br />&emsp;&emsp;“spin-table”：使用DT-Spec中定义的自旋表（spin table）方法启用CPU。<br />&emsp;&emsp;"[vendor],[method]" :实现取决于描述CPU从“disabled”状态释放的方法的字符串。所需格式为：“[vendor]，[method]”，其中vendor是描述制造商名称的字符串，method是描述供应商特定机制的字符串。示例：“fsl，MPC8572DS”<br /><br />注意：其他方法可能会添加到DTSpec规范的后续版本中。
|cpu-release-addr|SD| \<u64>|enable-method属性的值为“spin-table”的cpu节点需要cpu-release-addr属性。该值指定从其自旋循环释放次级（secondary）CPU的自旋表条目的物理地址。



>用法图例：R =必需，O =可选，OR =可选但推荐，SD =请参阅定义

>2.3节中的所有其它标准属性都是允许的，但是可选的。




&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;表 3.7  /cpus/cpu\*节点的Power ISA 属性

|属性名|用法|值类型|定义|
|:--|:--|:--|:--|
|power-isa-version|O| \<string>|一个字符串，指定Power ISA版本字符串的数字部分。 例如，对于符合Power ISA版本2.06的实现，此属性的值将为“2.06”。
|power-isa-* |O |\<empty>|如果power-isa-version属性存在，则对于显示的Power ISA版本的Book I的Categories部分中的每个类别，存在名为power-isa-[CAT]的属性，其中[CAT]是将所有大写字母转换为小写的类别名缩写，表示该实现支持该类别。<br /> <br />例如，如果power-isa-version属性存在且其值为“2.06”且power-isa-e.hv属性存在，则该实现支持Power ISA版本2.06中定义的[Category:Embedded.Hypervisor]。
|cache-op-block-size|SD |\<u32>|指定高速缓存块指令操作的块大小（以字节为单位）（例如，dcbz）。 如果与L1高速缓存块大小不同，则为必需。
|reservation-granule-size|SD |\<u32>|指定此处理器支持的预留粒度大小（以字节为单位）。
|mmu-type |O |\<string> |指定cpu的MMU类型，合法的值如下： "mpc8xx"、"ppc40x"、 "ppc440"、 "ppc476"、 "power-embedded"、 "powerpc-classic"、 "power-server-stab"、 "power-server-slb"、 "none"


>用法图例：R =必需，O =可选，OR =可选但推荐，SD =请参阅定义

>2.3节中的所有其它标准属性都是允许的，但是可选的。

旧版本的设备树，可能会在cpu节点中遇到bus-frequency 属性。 为了兼容性，客户程序可能希望支持bus-frequency。 该值的格式与clock-frequency的格式相同。 建议的做法是使用clock-frequency属性表示总线节点上总线频率。


### 3.7.2 TLB属性
cpu节点的以下属性描述了处理器MMU中的转换后备（translate look-aside）缓冲区。


&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;表 3.8  /cpus/cpu\*节点的Power ISA TLB属性


|属性名|用法|值类型|定义|
|:--|:--|:--|:--|
|tlb-split| SD|\<empty>|如果该属性存在，则指定TLB具有分开的配置用于指令和数据的独立TLB。 如果不存在，则指定TLB具有统一配置。对于具有用于分离配置TLB的CPU，该属性是必需的|
|tlb-size| SD |\<u32>| 指定TLB中的条目数。 对于具有用于指令和数据地址的统一TLB的CPU，该属性是必需的。|
|tlb-sets |SD| 	\<u32>| 指定TLB中的关联集的数量。对于具有用于指令和数据地址的统一TLB的CPU，该属性是必需的。|
|d-tlb-size| SD |	\<u32> |指定数据TLB中的条目数。对于具有用于分离配置TLB的CPU，该属性是必需的




------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文翻译自<font color=blue>[设备树官网](https://www.devicetree.org/)。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------
